{% extends "baseTemplate/newBase.html" %}
{% load i18n %}
{% block titleNew %}{% trans "Home - CyberPanel" %}{% endblock %}
{% block newContent %}

    {% load static %}

    <div ng-controller="listChildDomainsMainV2" class="p-8">
        <div class="flex lg:flex-row justify-between items-center sm:flex-col">
            <div>
                <p class="text-4xl font-bold">List Child Domains</p>
                <p class="text-xs text-gray-600 py-2 font-semibold">On this page you can launch,list,modify and
                    child domains
                    from your server</p>
            </div>
        </div>
        <!-- Search Bar -->
        <div class="flex justify-between py-1 mt-4">
            <div class="w-full">
                <div class="relative flex items-center w-full h-12 rounded-lg bg-gray-200 overflow-hidden">
                    <div class="grid place-items-center h-full w-12 text-gray-300">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" fill="none"
                             viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                        </svg>
                    </div>
                    <input ng-change="searchWebsites()" ng-model="patternAdded" name="dom"
                           class="h-full w-full bg-gray-200 outline-none text-sm text-gray-700 pr-2" type="text"
                           id="search" placeholder="Search" required/>
                </div>
            </div>
            <!-- Search Bar End -->
            <div class="pl-6">
                <select ng-model="recordsToShow" ng-change="getFurtherWebsitesFromDB()"
                        class="w-24 bg-gray-200 py-3 px-2 rounded" id="example-select">
                    <option>10</option>
                    <option>50</option>
                    <option>100</option>
                </select>
            </div>
        </div>


        <div class="py-8">
            <div class="border shadow-lg rounded-lg px-3">
                <div ng-repeat="web in WebSitesList track by $index" class="px-2">
                    <div class="bg-gray-200 mt-6 w-full rounded-t-lg border-b-2 border-gray-400">
                        <p class="font-bold px-4 py-1" ng-bind="web.domain"></p>
                    </div>
                    <div class="py-3 mb-3 rounded-b-lg border-b-2 border-gray-400 overflow-x-auto">
                        <table>
                            <tbody>
                            <div>
                                <tr>
                                    <th class="w-32 pt-2">
                                        <a href="/websites/{$ web.masterDomain $}/{$ web.domain $}"
                                           class="flex items-center ml-3">
                                            <svg width="20" height="20" viewBox="0 0 30 30" fill="none"
                                                 xmlns="http://www.w3.org/2000/svg">
                                                <path
                                                        d="M22.5 16.25V23.75C22.5 24.413 22.2366 25.0489 21.7678 25.5178C21.2989 25.9866 20.663 26.25 20 26.25H6.25C5.58696 26.25 4.95107 25.9866 4.48223 25.5178C4.01339 25.0489 3.75 24.413 3.75 23.75V10C3.75 9.33696 4.01339 8.70107 4.48223 8.23223C4.95107 7.76339 5.58696 7.5 6.25 7.5H13.75"
                                                        stroke="#3A6A7E" stroke-width="2" stroke-linecap="round"
                                                        stroke-linejoin="round"/>
                                                <path d="M18.75 3.75H26.25V11.25" stroke="#3A6A7E" stroke-width="2"
                                                      stroke-linecap="round"
                                                      stroke-linejoin="round"/>
                                                <path d="M12.5 17.5L26.25 3.75" stroke="#3A6A7E" stroke-width="2"
                                                      stroke-linecap="round"
                                                      stroke-linejoin="round"/>
                                            </svg>
                                            <p class="ml-2 text-blue-600 font-semibold">Manage</p>
                                        </a>
                                    </th>
                                    <th ng-click="initConvert(web.domain)"
                                        class="w-36 pt-2 font-semibold text-green-700 text-sm">
                                        <div class="col-md-4 content-box-header">
                                            <i class="p fa fa-arrows-h btn-icon text-muted" data-toggle="tooltip"
                                               data-placement="right" title="Convert to Website">&emsp;</i>
                                            <span>
        <a onclick="openModal()" href="#" style="text-transform: none">Convert to Website</a>
    </span>

                                            <!-- Modal -->
                                            <div id="modal"
                                                 class="fixed inset-0 overflow-auto bg-black bg-opacity-50 hidden flex items-center justify-center">
                                                <div class="bg-white p-8 rounded shadow-lg w-full md:w-1/2">
                                                    <button onclick="closeModal()"
                                                            class="absolute top-4 right-4 text-gray-700 hover:text-gray-900">
                                                        <i class="fa fa-times"></i>
                                                    </button>
                                                    <h1 class="text-2xl font-bold mb-4 text-black">Convert Child Domain
                                                        to Normal
                                                        Website
                                                    </h1>
                                                    <form name="containerSettingsForm" action="/" class="mb-4">
                                                        <div>
                                                            <div ng-hide="installationDetailsForm"
                                                                 class="flex py-2 px-6">
                                                                <div>
                                                                    <p class="font-semibold w-48">Domain Name</p>
                                                                </div>
                                                                <div>
                                                                    <input name="dom" type="text"
                                                                           class="form-control w-80 bg-gray-100 rounded px-2 py-1"
                                                                           ng-model="domainName"
                                                                           placeholder="{% trans "Do not enter WWW, it will be auto created!" %}"
                                                                           readonly>
                                                                </div>
                                                            </div>
                                                            <div ng-hide="installationDetailsForm"
                                                                 class="flex py-2 px-6">
                                                                <div>
                                                                    <p class="font-semibold w-48">Select Owner</p>
                                                                </div>
                                                                <div>
                                                                    <select ng-model="$parent.websiteOwner"
                                                                            class="form-control w-80 bg-gray-100 rounded px-2 py-1">
                                                                        {% for items in owernList %}
                                                                            <option>{{ items }}</option>
                                                                        {% endfor %}
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div ng-hide="installationDetailsForm"
                                                                 class="flex mt-4 py-2 px-6">
                                                                <div>
                                                                    <p class="font-semibold w-48">Select Package</p>
                                                                </div>
                                                                <div>
                                                                    <select ng-model="$parent.packageForWebsite"
                                                                            class="form-control w-80 bg-gray-100 rounded px-2 py-1">
                                                                        {% for items in packageList %}
                                                                            <option>{{ items }}</option>
                                                                        {% endfor %}
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div ng-hide="installationDetailsForm"
                                                                 class="flex py-2 px-6">
                                                                <div>
                                                                    <p class="font-semibold w-48">Email</p>
                                                                </div>
                                                                <div>
                                                                    <input type="email" name="email"
                                                                           class="form-control w-80 bg-gray-100 rounded px-2 py-1"
                                                                           ng-model="$parent.adminEmail" required>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div ng-hide="installationDetailsForm" class="flex py-2 px-6">
                                                            <div>
                                                                <p class="font-semibold w-48">Select PHP</p>
                                                            </div>
                                                            <div>
                                                                <select ng-model="$parent.phpSelection"
                                                                        class="form-control w-80 bg-gray-100 rounded px-2 py-1">
                                                                    {% for php in phps %}
                                                                        <option>{{ php }}</option>
                                                                    {% endfor %}
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="flex justify-end mt-3">
                                                            <button ng-click="convert()"
                                                                    class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                                                                Convert
                                                            </button>
                                                            <button onclick="closeModal()"
                                                                    class="ml-2 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded">
                                                                Close
                                                            </button>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>

                                    </th>
                                    <th class="w-32 pt-2 font-semibold text-sm"><span ng-bind="web.admin"
                                                                                      style="text-transform: none"></span>
                                    </th>
                                    <th class="w-32 pt-2 font-semibold text-sm"><span ng-bind="web.ipAddress"></span>
                                    </th>
                                    <th class="w-32 pt-2 font-semibold text-sm"><span ng-bind="web.package"
                                                                                      style="text-transform: none"></span>
                                    </th>
                                    <th class="w-32 pt-2 font-semibold text-sm"><span><a ng-click="issueSSL(web.domain)"
                                                                                         href=""
                                                                                         style="text-transform: none">Issue SSL</a></span>
                                    </th>
                                    <th class="w-32 pt-2 font-semibold text-red-700 text-sm">
                                        <div class="col-md-4 content-box-header">
                                            <i class="p fa fa-arrows-h btn-icon text-muted" data-toggle="tooltip"
                                               data-placement="right" title="Delete">&emsp;</i>
                                            <span><a onclick="openModal()" href="#"
                                                     style="text-transform: none">Delete</a>

                                                <!-- Modal -->
                                        <div id="modal"
                                             class="fixed inset-0 z-50 hidden overflow-auto bg-black bg-opacity-50">
                                            <div class="flex items-center justify-center h-full">
                                                <div class="bg-white p-8 rounded shadow-lg">
                                                    <button onclick="closeModal()"
                                                            class="absolute top-4 right-4 text-gray-700 hover:text-gray-900">
                                                        <i class="fa fa-times"></i>
                                                    </button>
                                                    <h1 class="text-2xl font-bold mb-4">Delete Child Domain</h1>
                                                    <form class="mb-4">
                                                        <!-- Your form content here -->
                                                        <div class="mb-4">
                                                            <input type="checkbox" id="deleteDocRoot"
                                                                   name="deleteDocRoot" class="mr-2">
                                                            <label for="deleteDocRoot">Delete Document Root</label>
                                                        </div>
                                                    </form>
                                                    <div class="flex justify-end">
                                                        <button ng-click="deleteChildDomain()"
                                                                class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">
                                                            Delete Now
                                                        </button>
                                                        <button onclick="closeModal()"
                                                                class="ml-2 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded">
                                                            Close
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        </div>
                                    </th>
                                </tr>
                            </div>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>


        <div class="flex justify-end mt-4">
            <select ng-model="currentPage" ng-change="getFurtherWebsitesFromDB()"
                    class="w-36 bg-gray-200 py-3 px-2 rounded" id="example-select">
                <option ng-repeat="page in pagination">{$ $index + 1 $}</option>
            </select>
        </div>

    </div>
    </div>
{% endblock %}
