{% extends "baseTemplate/newBase.html" %}
{% load i18n %}
{% block titleNew %}{% trans "Home - CyberPanel" %}{% endblock %}
{% block newContent %}

    {% load static %}

    <div ng-controller="listChildDomainsMainV2" class="p-8">
        <div>
            <div class="flex items-center">
                <p class="text-4xl font-bold">List Child Domains</p>
                <img ng-hide="cyberPanelLoading"
                     src="{% static 'images/loading.gif' %}">
            </div>
            <p class="text-xs text-gray-600 py-2 font-semibold">On this page you can launch,list,modify and
                child domains
                from your server</p>
        </div>
        <!-- Search Bar -->
        <div class="flex justify-between py-1 mt-4">
            <div class="w-full">
                <div class="relative flex items-center w-full h-12 rounded-lg bg-gray-200 overflow-hidden">
                    <div class="grid place-items-center h-full w-12 text-gray-300">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" fill="none"
                             viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                        </svg>
                    </div>
                    <input ng-change="searchWebsites()" ng-model="patternAdded" name="dom"
                           class="h-full w-full bg-gray-200 outline-none text-sm text-gray-700 pr-2" type="text"
                           id="search" placeholder="Search" required/>
                </div>
            </div>
            <!-- Search Bar End -->
            <div class="pl-6">
                <select ng-model="recordsToShow" ng-change="getFurtherWebsitesFromDB()"
                        class="w-24 bg-gray-200 py-3 px-2 rounded" id="example-select">
                    <option>10</option>
                    <option>50</option>
                    <option>100</option>
                </select>
            </div>
        </div>


        <div class="py-8">
            <div class="border shadow-lg rounded-lg px-3">
                <div ng-repeat="web in WebSitesList track by $index" class="px-2">
                    <div class="flex items-center bg-gray-200 mt-6 w-full rounded-t-lg border-b-2 border-gray-400">
                        <p class="font-bold px-4 py-1" ng-bind="web.domain"></p>
                        <a class="text-blue-600 font-semibold" target="_blank"
                           href="/filemanagerv2/{$ web.masterDomain $}" title="Open File Manager">
                            - File Manager</a>
                    </div>
                    <div class="py-3 mb-3 rounded-b-lg border-b-2 border-gray-400 overflow-x-auto">
                        <table>
                            <tbody>
                            <div>
                                <tr>
                                    <th class="w-32 pt-2">
                                        <a href="/v2Websites/{$ web.masterDomain $}/{$ web.domain $}"
                                           class="flex items-center ml-3">
                                            <svg width="20" height="20" viewBox="0 0 30 30" fill="none"
                                                 xmlns="http://www.w3.org/2000/svg">
                                                <path
                                                        d="M22.5 16.25V23.75C22.5 24.413 22.2366 25.0489 21.7678 25.5178C21.2989 25.9866 20.663 26.25 20 26.25H6.25C5.58696 26.25 4.95107 25.9866 4.48223 25.5178C4.01339 25.0489 3.75 24.413 3.75 23.75V10C3.75 9.33696 4.01339 8.70107 4.48223 8.23223C4.95107 7.76339 5.58696 7.5 6.25 7.5H13.75"
                                                        stroke="#3A6A7E" stroke-width="2" stroke-linecap="round"
                                                        stroke-linejoin="round"/>
                                                <path d="M18.75 3.75H26.25V11.25" stroke="#3A6A7E" stroke-width="2"
                                                      stroke-linecap="round"
                                                      stroke-linejoin="round"/>
                                                <path d="M12.5 17.5L26.25 3.75" stroke="#3A6A7E" stroke-width="2"
                                                      stroke-linecap="round"
                                                      stroke-linejoin="round"/>
                                            </svg>
                                            <p class="ml-2 text-blue-600 font-semibold">Manage</p>
                                        </a>
                                    </th>
                                    <th class="w-36 pt-2">
                                        <a onclick="return false;"
                                           ng-click="initConvert(web.domain)"
                                           class="font-semibold text-green-700 text-sm"
                                           href="#" data-modal-target="edit"
                                           data-modal-toggle="edit">{% trans "Convert To Website" %}
                                        </a>
                                        <div id="edit" tabindex="-1"
                                             class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
                                            <div class="relative p-4 w-full max-w-2xl max-h-full">
                                                <div class="relative bg-white shadow dark:bg-gray-700">
                                                    <div class="flex items-center bg-blue-400 px-4 py-4">
                                                        <p class="font-bold">Convert Child Domain to Normal Website</p>
                                                        <button type="button" data-modal-toggle="edit"
                                                                class="absolute top-2 end-1 text-black bg-transparent hover:text-black rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center"
                                                                data-modal-hide="edit">
                                                            <svg class="w-3 h-3" aria-hidden="true"
                                                                 xmlns="http://www.w3.org/2000/svg" fill="none"
                                                                 viewBox="0 0 14 14">
                                                                <path stroke="currentColor" stroke-linecap="round"
                                                                      stroke-linejoin="round" stroke-width="2"
                                                                      d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                                                            </svg>
                                                            <span class="sr-only">Close modal</span>
                                                        </button>
                                                    </div>
                                                    <div class="p-4 md:p-5">
                                                        <form name="containerSettingsForm">
                                                            <div ng-hide="installationDetailsForm"
                                                                 class="flex mt-4 py-2 px-6">
                                                                <div>
                                                                    <p class="font-semibold w-60">Domain Name</p>
                                                                </div>
                                                                <div>
                                                                    <input name="dom" type="text"
                                                                           class="w-80 bg-gray-100 rounded px-2 py-1"
                                                                           ng-model="domainName"
                                                                           placeholder="{% trans "Do not enter WWW, it will be auto created!" %}"
                                                                           readonly>
                                                                </div>
                                                            </div>
                                                            <div ng-hide="installationDetailsForm"
                                                                 class="flex py-2 px-6">
                                                                <div>
                                                                    <p class="font-semibold w-60">Select Owner</p>
                                                                </div>
                                                                <div>
                                                                    <select ng-model="$parent.websiteOwner"
                                                                            class="w-80 bg-gray-100 rounded px-2 py-1">
                                                                        {% for items in owernList %}
                                                                            <option>{{ items }}</option>
                                                                        {% endfor %}
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div ng-hide="installationDetailsForm"
                                                                 class="flex py-2 px-6">
                                                                <div>
                                                                    <p class="font-semibold w-60">Select Package</p>
                                                                </div>
                                                                <div>
                                                                    <select ng-model="$parent.packageForWebsite"
                                                                            class="form-control w-80 bg-gray-100 rounded px-2 py-1">
                                                                        {% for items in packageList %}
                                                                            <option>{{ items }}</option>
                                                                        {% endfor %}
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div ng-hide="installationDetailsForm"
                                                                 class="flex py-2 px-6">
                                                                <div>
                                                                    <p class="font-semibold w-60">Email</p>
                                                                </div>
                                                                <div>
                                                                    <input type="email" name="email"
                                                                           class="w-80 bg-gray-100 rounded px-2 py-1"
                                                                           ng-model="$parent.adminEmail" required>
                                                                </div>
                                                            </div>
                                                            <div ng-hide="installationDetailsForm"
                                                                 class="flex py-2 px-6">
                                                                <div>
                                                                    <p class="font-semibold w-60">Select PHP</p>
                                                                </div>
                                                                <div>
                                                                    <select ng-model="$parent.phpSelection"
                                                                            class="w-80 bg-gray-100 rounded px-2 py-1">
                                                                        {% for php in phps %}
                                                                            <option>{{ php }}</option>
                                                                        {% endfor %}
                                                                    </select>
                                                                </div>
                                                            </div>
                                                        </form>
                                                        <div class="flex justify-end mt-3">
                                                            <button ng-click="convert()"
                                                                    class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                                                                Convert
                                                            </button>
                                                            <button data-modal-toggle="edit"
                                                                    data-modal-hide="edit"
                                                                    class="ml-2 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded">
                                                                Close
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </th>
                                    <th class="w-32 pt-2 font-semibold text-sm"><span ng-bind="web.admin"
                                                                                      style="text-transform: none"></span>
                                    </th>
                                    <th class="w-32 pt-2 font-semibold text-sm"><span ng-bind="web.ipAddress"></span>
                                    </th>
                                    <th class="w-32 pt-2 font-semibold text-sm"><span ng-bind="web.package"
                                                                                      style="text-transform: none"></span>
                                    </th>
                                    <th class="w-32 pt-2 font-semibold text-sm"><span><a ng-click="issueSSL(web.domain)"
                                                                                         href=""
                                                                                         style="text-transform: none">Issue SSL</a></span>
                                    </th>
                                    <th class="w-32 pt-2">
                                        <a onclick="return false;"
                                           ng-click="deleteUserInitial(record.name)"
                                           class="bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-2 rounded"
                                           href="#" data-modal-target="delete"
                                           data-modal-toggle="delete">{% trans "Delete" %}
                                        </a>
                                        <div id="delete" tabindex="-1"
                                             class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
                                            <div class="relative p-4 w-full max-w-2xl max-h-full">
                                                <div class="relative bg-white shadow dark:bg-gray-700">
                                                    <div class="flex items-center bg-blue-400 px-4 py-4">
                                                        <p class="font-bold">Delete Child Domain</p>
                                                        <img ng-hide="cyberpanelLoading"
                                                             src="{% static 'images/loading.gif' %}">
                                                        <button type="button" data-modal-toggle="delete"
                                                                class="absolute top-2 end-1 text-black bg-transparent hover:text-black rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center"
                                                                data-modal-hide="delete">
                                                            <svg class="w-3 h-3" aria-hidden="true"
                                                                 xmlns="http://www.w3.org/2000/svg" fill="none"
                                                                 viewBox="0 0 14 14">
                                                                <path stroke="currentColor" stroke-linecap="round"
                                                                      stroke-linejoin="round" stroke-width="2"
                                                                      d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                                                            </svg>
                                                            <span class="sr-only">Close modal</span>
                                                        </button>
                                                    </div>
                                                    <div class="p-4 md:p-5">
                                                        <form class="mb-4">
                                                            <!-- Your form content here -->
                                                            <div class="mb-4">
                                                                <input type="checkbox" id="deleteDocRoot"
                                                                       name="deleteDocRoot" class="mr-2">
                                                                <label for="deleteDocRoot">Delete Document Root</label>
                                                            </div>
                                                        </form>
                                                        <div class="flex justify-end">
                                                            <button ng-click="deleteChildDomain()"
                                                                    class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">
                                                                Delete Now
                                                            </button>
                                                            <button data-modal-hide="delete" data-modal-toggle="delete"
                                                                    class="ml-2 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded">
                                                                Close
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </th>
                                </tr>
                            </div>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>


        <div class="flex justify-end mt-4">
            <select ng-model="currentPage" ng-change="getFurtherWebsitesFromDB()"
                    class="w-36 bg-gray-200 py-3 px-2 rounded" id="example-select">
                <option ng-repeat="page in pagination">{$ $index + 1 $}</option>
            </select>
        </div>
    </div>
    <th class="w-36 pt-2">
        <a onclick="return false;"
           ng-click="initConvert(web.domain)"
           class="font-semibold text-green-700 text-sm"
           href="#" data-modal-target="edit"
           data-modal-toggle="edit">{% trans "Convert To Website" %}
        </a>
        <div id="edit" tabindex="-1"
             class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
            <div class="relative p-4 w-full max-w-2xl max-h-full">
                <div class="relative bg-white shadow dark:bg-gray-700">
                    <div class="flex items-center bg-blue-400 px-4 py-4">
                        <p class="font-bold">Convert Child Domain to Normal Website</p>
                        <button type="button" data-modal-toggle="edit"
                                class="absolute top-2 end-1 text-black bg-transparent hover:text-black rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center"
                                data-modal-hide="edit">
                            <svg class="w-3 h-3" aria-hidden="true"
                                 xmlns="http://www.w3.org/2000/svg" fill="none"
                                 viewBox="0 0 14 14">
                                <path stroke="currentColor" stroke-linecap="round"
                                      stroke-linejoin="round" stroke-width="2"
                                      d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                            </svg>
                            <span class="sr-only">Close modal</span>
                        </button>
                    </div>
                    <div class="p-4 md:p-5">
                        <form name="containerSettingsForm">
                            <div ng-hide="installationDetailsForm"
                                 class="flex mt-4 py-2 px-6">
                                <div>
                                    <p class="font-semibold w-60">Domain Name</p>
                                </div>
                                <div>
                                    <input name="dom" type="text"
                                           class="w-80 bg-gray-100 rounded px-2 py-1"
                                           ng-model="domainName"
                                           placeholder="{% trans "Do not enter WWW, it will be auto created!" %}"
                                           readonly>
                                </div>
                            </div>
                            <div ng-hide="installationDetailsForm" class="flex py-2 px-6">
                                <div>
                                    <p class="font-semibold w-60">Select Owner</p>
                                </div>
                                <div>
                                    <select ng-model="$parent.websiteOwner"
                                            class="w-80 bg-gray-100 rounded px-2 py-1">
                                        {% for items in owernList %}
                                            <option>{{ items }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            <div ng-hide="installationDetailsForm" class="flex py-2 px-6">
                                <div>
                                    <p class="font-semibold w-60">Select Package</p>
                                </div>
                                <div>
                                    <select ng-model="$parent.packageForWebsite"
                                            class="form-control w-80 bg-gray-100 rounded px-2 py-1">
                                        {% for items in packageList %}
                                            <option>{{ items }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            <div ng-hide="installationDetailsForm" class="flex py-2 px-6">
                                <div>
                                    <p class="font-semibold w-60">Email</p>
                                </div>
                                <div>
                                    <input type="email" name="email"
                                           class="w-80 bg-gray-100 rounded px-2 py-1"
                                           ng-model="$parent.adminEmail" required>
                                </div>
                            </div>
                            <div ng-hide="installationDetailsForm" class="flex py-2 px-6">
                                <div>
                                    <p class="font-semibold w-60">Select PHP</p>
                                </div>
                                <div>
                                    <select ng-model="$parent.phpSelection"
                                            class="w-80 bg-gray-100 rounded px-2 py-1">
                                        {% for php in phps %}
                                            <option>{{ php }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                        </form>
                        <div class="flex justify-end mt-3">
                            <button ng-click="convert()"
                                    class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                                Convert
                            </button>
                            <button data-modal-toggle="edit"
                                    data-modal-hide="edit"
                                    class="ml-2 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded">
                                Close
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </th>
    <th class="w-32 pt-2">
        <a onclick="return false;"
           ng-click="deleteUserInitial(record.name)"
           class="bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-2 rounded"
           href="#" data-modal-target="delete" data-modal-toggle="delete">{% trans "Delete" %}
        </a>
        <div id="delete" tabindex="-1"
             class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
            <div class="relative p-4 w-full max-w-2xl max-h-full">
                <div class="relative bg-white shadow dark:bg-gray-700">
                    <div class="flex items-center bg-blue-400 px-4 py-4">
                        <p class="font-bold">Delete Child Domain</p>
                        <img ng-hide="cyberpanelLoading"
                             src="{% static 'images/loading.gif' %}">
                        <button type="button" data-modal-toggle="delete"
                                class="absolute top-2 end-1 text-black bg-transparent hover:text-black rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center"
                                data-modal-hide="delete">
                            <svg class="w-3 h-3" aria-hidden="true"
                                 xmlns="http://www.w3.org/2000/svg" fill="none"
                                 viewBox="0 0 14 14">
                                <path stroke="currentColor" stroke-linecap="round"
                                      stroke-linejoin="round" stroke-width="2"
                                      d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                            </svg>
                            <span class="sr-only">Close modal</span>
                        </button>
                    </div>
                    <div class="p-4 md:p-5">
                        <form class="mb-4">
                            <!-- Your form content here -->
                            <div class="mb-4">
                                <input type="checkbox" id="deleteDocRoot"
                                       name="deleteDocRoot" class="mr-2">
                                <label for="deleteDocRoot">Delete Document Root</label>
                            </div>
                        </form>
                        <div class="flex justify-end">
                            <button ng-click="deleteChildDomain()"
                                    class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">
                                Delete Now
                            </button>
                            <button data-modal-hide="delete" data-modal-toggle="delete"
                                    class="ml-2 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded">
                                Close
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </th>
{% endblock %}
